<extend name="Common:index"/>
<block name="main">

    <!--<script src="https://img.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>-->
    <script src='__PUBLIC__/Admin/js/jquery-1.8.3.min.js'></script>
    <!--<script src="https://img.hcharts.cn/highcharts/highcharts.js"></script>-->
    <script src="__PUBLIC__/Admin/assets/js/123.js"></script>
    <script src="__PUBLIC__/Admin/assets/js/124.js"></script>
    <!--<script src="https://img.hcharts.cn/highcharts/highcharts-more.js"></script>-->
    <div class="main-content">
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
            </script>
            <ul class="breadcrumb">
                <li>
                    <i class="icon-home home-icon"></i>
                    <a href="#">主页</a>
                </li>
                <li>
                    <a href="#">成绩报表</a>
                </li>
                <li class="active">成绩分析</li>
            </ul><!-- .breadcrumb -->
        </div>
        <div class="page-content" >
            <div class="page-header" style="margin:0px">
                <h1>
                    成绩报表
                    <small>
                        <i class="icon-double-angle-right"></i>
                        成绩分析
                    </small>
                    <button type="button" class="btn btn-warning btn-xs pull-right" id="print">导出</button>
                </h1>

            </div><!-- /.page-header -->

            <a href="{:U('ocode_rep',array('id'=>$_GET['id']))}"><button class="btn btn-info btn-xs pull-right getSubInfo" style="margin-top:8px;margin-left: 250px;">返回</button></a>
            <!--<button type="button" class="pull-right btn-danger btn-xs tool" style="margin-top:8px;margin-left: 250px;">测量工具</button>-->
            <div style="width:770px;margin: 0 auto;height:40px;margin-bottom:10px;" class="sub-ul">
                <ul>
                    <volist name="subname" id="subname">
                        <a href="{:U('class_rep',array('id'=>$_GET['id'],'subject'=>$subname['key'],'ocode'=>$_GET['ocode']))}"><li class="sub-no {$subname.key}">{$subname.name}</li></a>
                    </volist>

                </ul>

            </div>

            <!--startprint-->
            <div class="row" name="remove_tool">
                <div class="col-xs-12">
                    <!-- PAGE CONTENT BEGINS -->
                    <div class="row">
                        <div class="col-xs-12">
                            <!-- PAGE CONTENT BEGINS -->

                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="table-responsive">
                                        <div class="tool_border" style="border-top:1px solid black;width:720px;position: absolute;display: none;cursor: pointer;z-index: 1000000;"></div>
                                        <div class="rep_first">
                                            <div style="padding-bottom:10px;border:1px solid #999;border-bottom:0px;width:720px">
                                                <h2 class="center">{$Exam.name}</h2>
                                                <div class="rep-header" style="border-top:1px solid #999;padding-top:10px">
                                                    <p>考试时间: {$Exam.examtime}</p>
                                                    <p>监测科目: {$chsub}</p>
                                                    <p>监测班级:
                                                        <volist name="info" id="schname">
                                                            <?php if($schname['classname'] != '总体情况'){?>
                                                            <?php echo $schname['classname'].'、' ?>
                                                            <?php }?>
                                                        </volist>
                                                    </p>
                                                    <?php $sub = $_GET['subject'] ? $_GET['subject'] : 'total';

                                                    if($sub != 'total'){?>

                                                    <div style="margin-bottom: 200px">
                                                        <div id="like1" style="width:359px;height:200px;padding:20px;float:left"></div>
                                                        <div id="like2" style="width:359px;height:200px;padding:20px;float:left"></div>
                                                        <div id="like3" style="width:359px;height:200px;padding:20px;float:left"></div>
                                                        <div id="like4" style="width:359px;height:200px;padding:20px;float:left"></div>
                                                    </div>
                                                    <br>
                                                    <p>一、班级情况</p>
                                                    <?php }else{?>
                                                    <br>
                                                    <p>一、各学科各指标横向比较</p>
                                                    <div id="total1" style="width:359px;height:300px;padding:20px;float:left"></div>
                                                    <div id="total2" style="width:359px;height:300px;padding:20px;float:left"></div>
                                                    <div id="total3" style="width:359px;height:300px;padding:20px;float:left"></div>
                                                    <div id="total4" style="width:359px;height:300px;padding:20px;float:left"></div>
                                                    <div id="imgdetails" style="width:720px;height:400px;padding:20px;float:left"></div>
                                                    <br>
                                                    <p>二、班级情况</p>
                                                    <?php }?>
                                                    <p>①.</p>
                                                    <p>综合指数≥3.0的学校{$chsub}综合指数（按照指数从大到小排列）：<span class="classgood"></span></p>
                                                    <p>总分综合指数<3.0的学校{$chsub}综合指数（按照指数从大到小排列）：<span class="classlow"></span></p>
                                                    <p>②.</p>
                                                    <p>A率≥15%的学校{$chsub}A率（按照指数从大到小排列）：<span class="aclassgood"></span></p>
                                                    <p>A率<15%的学校{$chsub}A率（按照指数从大到小排列）：<span class="aclasslow"></span></p>
                                                    <p>③.</p>
                                                    <p>后30%≤30%的学校{$chsub}后30%（按照指数从小到大排列 :<span class="bclassgood"></span></p>
                                                    <p>后30%>30%的学校{$chsub}后30%（按照指数从小到大排列）：<span class="bclasslow"></span></p>
                                                    <p>④.</p>
                                                    <p>标准分平均分≥500的学校{$chsub}标准分平均分（按照指数从大到小排列 :<span class="allclassgood"></span></p>
                                                    <p>标准分平均分<500的学校{$chsub}标准分平均分（按照指数从大到小排列）：<span class="allclasslow"></span></p>
                                                    <!--<p>5.</p>-->
                                                    <!--<p>综合指数≥3.0，A率≥15%，后30%≤30%，总分标准分平均分≥500的班级:<span class="allgoodclassgood">初三(15)班、 初三(16)班</span></p>-->
                                                </div>
                                            </div>

                                            <div id="compolite" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="stand" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="container" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="someall" style="width:720px;height:520px;border:1px solid #999;padding:20px"></div>
                                            <div id="someall2" style="width:720px;height:520px;border:1px solid #999;padding:20px"></div>
                                            <div id="someall1" style="width:720px;height:520px;border:1px solid #999;padding:20px"></div>

                                            <div style="padding-bottom:20px;border:1px solid #999;width:720px">
                                                <h3 class="center">数据报告</h3>
                                                <table class="table-bordered rep-tabel">
                                                    <tr>
                                                        <th class="center" style="width:160px;">学校</th>
                                                        <th class="center">参考人数</th>
                                                        <th class="center">A</th>
                                                        <th class="center">B</th>
                                                        <th class="center">C</th>
                                                        <th class="center">D</th>
                                                        <th class="center">E</th>
                                                        <th class="center">综合指数</th>
                                                    </tr>
                                                    <tbody>
                                                    <volist name="info" id="info">
                                                        <tr>
                                                            <td class="center">{$info.classname}</td>
                                                            <td class="center">{$info.schNum}</td>
                                                            <td class="center">{$info.A}%</td>
                                                            <td class="center">{$info.B}%</td>
                                                            <td class="center">{$info.C}%</td>
                                                            <td class="center">{$info.D}%</td>
                                                            <td class="center">{$info.E}%</td>
                                                            <td class="center">{$info.composite}</td>
                                                        </tr>
                                                    </volist>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <?php
                                                $sub = $_GET['subject'] ? $_GET['subject'] : 'total';

                                                if($sub != 'total'){
                                            ?>
                                            <div id="diffs" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="jian" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="zhon" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="nan" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="nan1" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div id="nan2" style="width:720px;height:390px;border:1px solid #999;padding:20px"></div>
                                            <div style="border:1px solid #999;width:720px;padding-bottom:20px">
                                                <h3 class="center">知识点</h3>
                                                <table class="table-bordered rep-tabel" >
                                                    <volist name="know" id="know">
                                                        <tr>
                                                            <td class="center">
                                                                <input type="checkbox" name="know_choclick" class="{$know.know_keys}" title="{$know.know_name}" abc="news{$i}">
                                                            </td>
                                                            <td class="center">{$i}</td>
                                                            <td class="center">{$know.know_name}</td>
                                                            <td style="padding-left:10px">{$know.know_keys}</td>
                                                        </tr>
                                                    </volist>
                                                </table>
                                            </div>

                                            <?php }else{?>

                                            <!--<div style="width:720px;padding-bottom:20px;border:1px solid #999;">-->
                                                <!--<div id="allinfos" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>-->
                                                <!--<div id="radar" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>-->
                                            <!--</div>-->
                                            <?php }?>

                                            <div style="width:720px;padding-bottom:20px;" class="fracmodal">

                                            </div>

                                        </div>
                                    </div><!-- /.table-responsive -->
                                </div><!-- /span -->
                            </div><!-- /row -->
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.page-content -->
    </div><!-- /.main-content -->
    <!--endprint-->

    <input type="hidden" class="schName" value="<?php echo $_GET['ocode']?>">


    <!--<script src="__PUBLIC__/Admin/assets/js/report.js"></script>-->
    <script>
        var url = $('#oa_url').val();
        $(document).ready(function () {
            var course_bh = "<?php echo $_GET['subject']?>";
            if(!course_bh)
            {
                course_bh = 'total';
            }
            var ocode = "<?php echo $_GET['ocode']?>";
            $("."+course_bh).removeAttr('class');
            var id = "<?php echo $_GET['id']?>";

            $('#like4').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    text:'',
                    categories: ['全区', '本校']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: ''
                    }
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: '标准分平均分',
                    data: [
                        ['全区', 23.7],
                        ['本校', 16.1]
                    ],
                    dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#FFFFFF',
                        align: 'center',
                        format: '{point.y:.1f}', // one decimal
                        y: 10, // 10 pixels down from the top
                        style: {
                            fontSize: '10px',
                            fontFamily: 'Verdana, sans-serif'
                        }
                    }
                }]
            });
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclicks",
                type:'POST',
                data:{know_id:id,sub:course_bh,ocode:ocode,tips:'sim1'},
                dataType:'json',
                success: function(data){
                    $('#jian').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: '难度系数 0.8 ~ 1'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category'

                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'green',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            },{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.testnews[course_bh][0],
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },
                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: ''
                        },

                        series: [{
                            name: '11',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation:0,
                                color: '#FFFFFF',
                                align: 'center',
                                format: '{point.y:.3f}', // one decimal
                                y: 0, // 10 pixels down from the top
                                style: {
                                    fontSize: '8px',
                                    fontFamily: 'Verdana, sans-serif'
                                },
                                maxPointWidth: -1
                            }
                        }]
                    });
                    $('#jian').append("<div style='padding-left:260px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                    $('#jian').append("<div style='padding-left:40px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                }
            });
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclicks",
                type:'POST',
                data:{know_id:id,sub:course_bh,ocode:ocode,tips:'sim1'},
                dataType:'json',
                success: function(data){
                    $('#zhon').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: '难度系数 0.6 ~ 0.8'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category'

                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'green',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            },{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.testnews[course_bh][1],
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },
                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: ''
                        },

                        series: [{
                            name: '11',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation:0,
                                color: '#FFFFFF',
                                align: 'center',
                                format: '{point.y:.3f}', // one decimal
                                y: 0, // 10 pixels down from the top
                                style: {
                                    fontSize: '8px',
                                    fontFamily: 'Verdana, sans-serif'
                                },
                                maxPointWidth: -1
                            }
                        }]
                    });
                    $('#zhon').append("<div style='padding-left:260px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                    $('#zhon').append("<div style='padding-left:40px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                }
            })
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclicks",
                type:'POST',
                data:{know_id:id,sub:course_bh,ocode:ocode,tips:'sim3'},
                dataType:'json',
                success: function(data){
                    $('#nan').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: '难度系数 0.4 ~ 0.6'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category'

                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'green',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            },{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.testnews[course_bh][2],
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },
                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: ''
                        },

                        series: [{
                            name: '11',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation:0,
                                color: '#FFFFFF',
                                align: 'center',
                                format: '{point.y:.3f}', // one decimal
                                y: 0, // 10 pixels down from the top
                                style: {
                                    fontSize: '8px',
                                    fontFamily: 'Verdana, sans-serif'
                                },
                                maxPointWidth: -1
                            }
                        }]
                    });
                    $('#nan').append("<div style='padding-left:260px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                    $('#nan').append("<div style='padding-left:40px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                }
            })
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclicks",
                type:'POST',
                data:{know_id:id,sub:course_bh,ocode:ocode,tips:'sim4'},
                dataType:'json',
                success: function(data){
                    $('#nan1').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: '难度系数 0.2 ~ 0.4'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category'

                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'green',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            },{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.testnews[course_bh][3],
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },
                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: ''
                        },

                        series: [{
                            name: '11',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation:0,
                                color: '#FFFFFF',
                                align: 'center',
                                format: '{point.y:.3f}', // one decimal
                                y: 0, // 10 pixels down from the top
                                style: {
                                    fontSize: '8px',
                                    fontFamily: 'Verdana, sans-serif'
                                },
                                maxPointWidth: -1
                            }
                        }]
                    });
                    $('#nan1').append("<div style='padding-left:260px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                    $('#nan1').append("<div style='padding-left:40px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                }
            })
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclicks",
                type:'POST',
                data:{know_id:id,sub:course_bh,ocode:ocode,tips:'sim5'},
                dataType:'json',
                success: function(data){
                    $('#nan2').highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: '难度系数 0 ~ 0.2'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category'

                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'green',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            },{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.testnews[course_bh][4],
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:-40                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },
                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: ''
                        },

                        series: [{
                            name: '11',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation:0,
                                color: '#FFFFFF',
                                align: 'center',
                                format: '{point.y:.3f}', // one decimal
                                y: 0, // 10 pixels down from the top
                                style: {
                                    fontSize: '8px',
                                    fontFamily: 'Verdana, sans-serif'
                                },
                                maxPointWidth: -1
                            }
                        }]
                    });
                    $('#nan2').append("<div style='padding-left:260px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                    $('#nan2').append("<div style='padding-left:40px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                }
            })

            $.ajax({
                url: "http://" + url + "/index.php/Comment/imgReport",
                type: 'POST',
                data: {id:id,sub:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#container').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: '各段堆积图'
                            },
                            xAxis: {
                                categories: data.info.schoolname
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                },
                                ceiling:400,
                                plotLines: [{
                                    color: 'red',           //线的颜色，定义为红色
                                    dashStyle: 'solid',     //默认值，这里定义为实线
                                    value: 85,               //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                                    width: 1,                //标示线的宽度，2px
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40  ,                       //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:4
                                    }
                                },
                                    {
                                        color: 'green',           //线的颜色，定义为红色
                                        dashStyle: 'solid',     //默认值，这里定义为实线
                                        value: 30,               //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                                        width: 1 ,                //标示线的宽度，2px
                                        label:{
                                            text:'',     //标签的内容
                                            align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                            x:-40  ,                       //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                            y:4
                                        }            //标示线的宽度，2px
                                    }
                                ]
                            },

                            tooltip: {
                                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                                shared: true
                            },
                            plotOptions: {
                                column: {
                                    stacking: 'percent',
                                    pointWidth:28,
                                    dataLabels: {
                                        enabled: true,
                                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
                                        style: {
                                            textShadow: '0 0 3px black'
                                        }
                                    }
                                },
                                series: {
                                    allowPointSelect: false,//点击变色
                                    cursor: 'pointer',
                                    events: {
                                        click: function(e) {
                                            var school_name = "<?php echo $_GET['ocode']?>";
                                            var class_name = e.point.category;
                                            window.open('http://'+url+'/index.php/Report/class_info/id/'+id+'/classname/'+class_name+'/schoolname/'+school_name);
                                        },
                                        legendItemClick: function() {
                                            return false;
                                        }
                                    }
                                }
                            },
                            series: [{
                                name: 'A (15%)',
                                color: '#CC0000 ',
                                data: data.info.info.A,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: 'B (25%)',
                                color: '#EE7700',
                                data: data.info.info.B,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: 'C (30%)',
                                color: '#DDAA00',
                                data: data.info.info.C,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            },{
                                name: 'D (25%)',
                                color: '#88AA00',
                                data: data.info.info.D,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            },{
                                name: 'E (5%)',
                                color: '#00AA00',
                                data: data.info.info.E,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }]
                        });
                        $('#container').append("<div style='padding-left:240px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;85%</div>");
                        $('#container').append("<div style='padding-left:80px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;30%</div>");

                    }
                }
            });
            $.ajax({
                url: "http://" + url + "/index.php/Comment/composliteAll",
                type: 'POST',
                data: {id:id,subject:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#compolite').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: '各班'+data.title+'综合指数柱状图'
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                type: 'category'

                            },
                            yAxis: {
                                min: 1,
                                title: {
                                    text: ''
                                },
                                plotLines: [{ // mark the weekend
                                    color: 'red',
                                    width: 2,
                                    value: 3,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-30                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                    }
                                },
                                    { // mark the weekend
                                        color: 'green',
                                        width: 1,
                                        value: data.infos[0][1],
                                        dashStyle: 'solid',
                                        label:{
                                            text:'',     //标签的内容
                                            align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                            x:-30                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        }
                                    }]

                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: ''
                            },

                            series: [{
                                name: '11',
                                data: data.infos,
                                dataLabels: {
                                    enabled: true,
                                    rotation:-90,
                                    color: '#FFFFFF',
                                    align: 'right',
                                    format: '{point.y:.3f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '8px',
                                        fontFamily: 'Verdana, sans-serif'
                                    },
                                    maxPointWidth: -1
                                }
                            }]
                        });
                        $('#like1').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                text:'',
                                categories: ['全区', '本校']
                            },
                            yAxis: {
                                min: 2.5,
                                title: {
                                    text: ''
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: '综合指数',
                                data: [
                                    ['全区', data.areacom],
                                    ['本校', data.schcom]
                                ],
                                dataLabels: {
                                    enabled: true,
                                    rotation: 0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.3f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('.classgood').html(data.good);
                        $('.classlow').html(data.low);
                        $('#compolite').append("<div style='padding-left:250px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                        $('#compolite').append("<div style='padding-left:60px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                    }
                }
            });
            $.ajax({
                url: "http://" + url + "/index.php/Comment/standardScore",
                type: 'POST',
                data: {id:id,subject:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#stand').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: data.title+'平均分的标准分'
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                type: 'category'

                            },
                            yAxis: {
                                min: 210,
                                title: {
                                    text: ''
                                },
                                plotLines: [{ // mark the weekend
                                    color: 'red',
                                    width: 1,
                                    value: 500,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-50 ,                        //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:10
                                    }
                                },
                                    { // mark the weekend
                                        color: 'green',
                                        width: 1,
                                        value: data.allnewtips,
                                        dashStyle: 'solid',
                                        label:{
                                            text:'',     //标签的内容
                                            align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                            x:-45                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        }
                                    }
                                ]

                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: ''
                            },
                            series: [{
                                name: '11',
                                data: data.infos,
                                dataLabels: {
                                    enabled: true,
                                    rotation:-90,
                                    color: '#FFFFFF',
                                    align: 'right',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '8px',
                                        fontFamily: 'Verdana, sans-serif'
                                    },
                                    maxPointWidth: -1
                                }
                            }]
                        });
                        $('#like4').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                text:'',
                                categories: ['全区', '本校']
                            },
                            yAxis: {
                                min: 300,
                                title: {
                                    text: ''
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: '标准分平均分',
                                data: [
                                    ['全区', 500],
                                    ['本校', data.allnewtips]
                                ],
                                dataLabels: {
                                    enabled: true,
                                    rotation: 0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('.allclassgood').html(data.good);
                        $('.allclasslow').html(data.low);
                        $('#stand').append("<div style='padding-left:250px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                        $('#stand').append("<div style='padding-left:60px;float:left'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                    }
                }
            });
            $.ajax({
                url: "http://" + url + "/index.php/Comment/getsomeinfo",
                type: 'POST',
                data: {id:id,subject:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#someall').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: '各班前15%学生比率柱状图'
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                type: 'category'

                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                },
                                plotLines: [{ // mark the weekend
                                    color: 'red',
                                    width: 2,
                                    value: data.arearate.A,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40,                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:10
                                    }
                                },{ // mark the weekend
                                    color: 'green',
                                    width: 2,
                                    value: data.schrate.A,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40,                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:10
                                    }
                                }]

                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: ''
                            },
                            series: [{
                                name: '11',
                                data: data.infos['A'],
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 0, // 10 pixels down from the top
                                    style: {
                                        fontSize: '8px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('#someall1').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: '各校后30%学生比率柱状图'
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                type: 'category'

                            },
                            yAxis: {
                                max:0,
                                title: {
                                    text: ''
                                },
                                plotLines: [{ // mark the weekend
                                    color: 'red',
                                    width: 1,
                                    value: -data.arearate.E,
                                    dashStyle: 'solid',

                                },{ // mark the weekend
                                    color: 'green',
                                    width: 1,
                                    value: -data.schrate.E,
                                    dashStyle: 'solid',

                                }]

                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: ''
                            },
                            series: [{
                                name: '11',
                                data: data.infos['E'],
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 0, // 10 pixels down from the top
                                    style: {
                                        fontSize: '8px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('#someall2').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: '各校前40%学生比率柱状图'
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                type: 'category'

                            },
                            yAxis: {
                                min:10,
                                title: {
                                    text: ''
                                },
                                plotLines: [{ // mark the weekend
                                    color: 'red',
                                    width: 2,
                                    value: data.arearate.B,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40,                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:10
                                    }
                                },{ // mark the weekend
                                    color: 'green',
                                    width: 2,
                                    value: data.schrate.B,
                                    dashStyle: 'solid',
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40,                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:10
                                    }
                                }]

                            },
                            legend: {
                                enabled: false
                            },
                            tooltip: {
                                pointFormat: ''
                            },
                            series: [{
                                name: '11',
                                data: data.infos['B'],
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 0, // 10 pixels down from the top
                                    style: {
                                        fontSize: '8px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });

                        $('#someall').append("<div style='padding-left:260px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                        $('#someall').append("<div style='padding-left:60px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                        $('#someall1').append("<div style='padding-left:260px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                        $('#someall1').append("<div style='padding-left:60px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");
                        $('#someall2').append("<div style='padding-left:260px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;全区</div>");
                        $('#someall2').append("<div style='padding-left:60px;float:left;'><p style='height: 10px;width:25px;border-bottom:2px solid green;float: left'></p>&nbsp;本校</div>");

                        $('#like2').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                text:'',
                                categories: ['全区', '本校']
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: 'A率',
                                data: [
                                    ['全区', data.arearate.A],
                                    ['本校', data.schrate.A]
                                ],
                                dataLabels: {
                                    enabled: true,
                                    rotation: 0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('#like3').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                text:'',
                                categories: ['全区', '本校']
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                }
                            },
                            credits: {
                                enabled: false
                            },
                            series: [{
                                name: '后30%',
                                data: [
                                    ['全区', data.arearate.E],
                                    ['本校', data.schrate.E]
                                ],
                                dataLabels: {
                                    enabled: true,
                                    rotation: 0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.1f}', // one decimal
                                    y: 10, // 10 pixels down from the top
                                    style: {
                                        fontSize: '10px',
                                        fontFamily: 'Verdana, sans-serif'
                                    }
                                }
                            }]
                        });
                        $('.aclassgood').html(data.good);
                        $('.aclasslow').html(data.low);
                        $('.bclassgood').html(data.bgood);
                        $('.bclasslow').html(data.blow);
                    }
                }
            });
            $.ajax({
                url: "http://" + url + "/index.php/Comment/getDifficulty",
                type: 'POST',
                data: {know_id:id,subject:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#diffs').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: data.title+'题型各个难度对比情况'
                            },
                            xAxis: {
                                categories: [
                                    '0.8~1',
                                    '0.6~0.8',
                                    '0.4~0.6',
                                        '0.2~0.4',
                                        '0~0.2'
                                ]
                            },
                            yAxis: [{
                                min: 0,
                                title: {
                                    text: ''
                                }
                            }, {
                                title: {
                                    text: ''
                                },
                                opposite: true
                            }],
                            legend: {
                                shadow: false
                            },
                            tooltip: {
                                shared: true
                            },
                            plotOptions: {
                                column: {
                                    grouping: false,
                                    shadow: false,
                                    borderWidth: 0
                                }
                            },
                            series: [{
                                name: '总分指数',
                                color: 'rgba(165,170,217,1)',
                                data: [data.test.sim1,data.test.sim2,data.test.sim3,data.test.sim4,data.test.sim5],
                                pointPadding: 0.3,
                                pointPlacement: -0.2,
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.2f}', // one decimal
                                    y: 8, // 10 pixels down from the top
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: '全区指数',
                                color: 'rgba(126,86,134,.9)',
                                data: data.test1,
                                pointPadding: 0.3,
                                pointPlacement: -0.2,
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.2f}', // one decimal
                                    y: 8, // 10 pixels down from the top
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: '总分指数',
                                color: 'rgba(165,170,217,1)',
                                data: [data.test.sim1,data.test.sim2,data.test.sim3,data.test.sim4,data.test.sim5],
                                pointPadding: 0.3,
                                pointPlacement: 0.2,
                                yAxis: 1,
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.2f}', // one decimal
                                    y: 8, // 10 pixels down from the top
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: '本校指数',
                                color: 'rgba(186,60,61,.9)',
                                data: data.test2,
                                pointPadding: 0.3,
                                pointPlacement: 0.2,
                                yAxis: 1,
                                dataLabels: {
                                    enabled: true,
                                    rotation:0,
                                    color: '#FFFFFF',
                                    align: 'center',
                                    format: '{point.y:.2f}', // one decimal
                                    y: 8, // 10 pixels down from the top
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }]
                        });
                    }
                }
            });
            $.ajax({
                url: "http://" + url + "/index.php/Comment/imgReportdetails",
                type: 'POST',
                data: {id:id,sub:course_bh,ocode:ocode},
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.success == true) {
                        $('#imgdetails').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                categories: data.name
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                },
                                ceiling:400,
                                plotLines: [{
                                    color: 'red',           //线的颜色，定义为红色
                                    dashStyle: 'solid',     //默认值，这里定义为实线
                                    value: 85,               //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                                    width: 1,                //标示线的宽度，2px
                                    label:{
                                        text:'',     //标签的内容
                                        align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                        x:-40  ,                       //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                        y:4
                                    }
                                },
                                    {
                                        color: 'green',           //线的颜色，定义为红色
                                        dashStyle: 'solid',     //默认值，这里定义为实线
                                        value: 30,               //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                                        width: 1 ,                //标示线的宽度，2px
                                        label:{
                                            text:'',     //标签的内容
                                            align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                            x:-40  ,                       //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                            y:4
                                        }            //标示线的宽度，2px
                                    }
                                ]
                            },

                            tooltip: {
                                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                                shared: true
                            },
                            plotOptions: {
                                column: {
                                    stacking: 'percent',
                                    pointWidth:28,
                                    dataLabels: {
                                        enabled: true,
                                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
                                        style: {
                                            textShadow: '0 0 3px black'
                                        }
                                    }
                                },
                                series: {
                                    allowPointSelect: false,//点击变色
                                    cursor: 'pointer',
                                    events: {
                                        click: function(e) {
                                            var school_name = "<?php echo $_GET['ocode']?>";
                                            var class_name = e.point.category;
                                            window.open('http://'+url+'/index.php/Report/class_info/id/'+id+'/classname/'+class_name+'/schoolname/'+school_name);
                                        },
                                        legendItemClick: function() {
                                            return false;
                                        }
                                    }
                                }
                            },
                            series: [{
                                name: 'A (15%)',
                                color: '#CC0000 ',
                                data: data.info.A,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: 'B (25%)',
                                color: '#EE7700',
                                data: data.info.B,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }, {
                                name: 'C (30%)',
                                color: '#DDAA00',
                                data: data.info.C,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            },{
                                name: 'D (25%)',
                                color: '#88AA00',
                                data: data.info.D,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            },{
                                name: 'E (5%)',
                                color: '#00AA00',
                                data: data.info.E,
                                dataLabels: {
                                    style: {
                                        fontSize: '9px'
                                    }
                                }
                            }]
                        });

                    }
                }
            });
        });
        $('input[name=know_choclick]').click(function () {
            $('input[name=know_choclick]').removeAttr('checked');
            $(this).attr('checked','checked');
            var title = $(this).attr('title');
            var know_id = "<?php echo $_GET['id']?>";
            var ocode = "<?php echo $_GET['ocode']?>";
            var sub = "<?php echo $_GET['subject']?>" ? "<?php echo $_GET['subject']?>" : 'chi';
            var subval = $(this).attr('class');
            var vals = $(this).attr('abc');
            $.ajax({
                url:"http://"+url+"/index.php/Comment/get_knowclick",
                type:'POST',
                data:{know_id:know_id,sub:sub,subval:subval,ocode:ocode},
                dataType:'json',
                success: function(data){
                    var div =  "<div id="+vals+" style='width:720px;height:390px;border:1px solid #999;padding:20px'></div>";
                    var tr = '';
                    for(var j=0;j<data.arr_name.length;j++) {
                        var num = j+1;
                            tr += "<th width='42px' style='border:1px solid #999;text-align:center'>"+num+"班</th>";
                    };
                    $('.fracmodal').append(div);
                    $('.fracmodal').append("<table><tr><th width='50px' style='border:1px solid #999;text-align:center'></th>"+tr+"</tr>");

                    for (var i=0;i<data.title.length;i++)
                    {
                        var ps = '';
                        var psval = '';
                        ps = "<th width='50px' style='border:1px solid #999;text-align:center'>"+data.title[i]+"</th>";
                        for(var j=0;j<data.arr_name.length;j++)
                        {
                            psval += "<th width='42px' style='border:1px solid #999;text-align:center'>"+data.arr_info[j][i]+"</th>";
                        }
                        $('.fracmodal').append("<table><tr>"+ps+psval+"</table></tr>");
                    }
                    $("#"+vals).highcharts({
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: title
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            type: 'category',
                            labels: {
                                rotation: -45,
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: ''
                            },
                            plotLines: [{ // mark the weekend
                                color: 'red',
                                width: 2,
                                value: data.tips,
                                dashStyle: 'solid',
                                label:{
                                    text:'',     //标签的内容
                                    align:'left',                //标签的水平位置，水平居左,默认是水平居中center
                                    x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                                }
                            }]

                        },

                        legend: {
                            enabled: false
                        },
                        tooltip: {
                            pointFormat: 'Population in 2008: <b>{point.y:.1f} millions</b>'
                        },
                        series: [{
                            name: 'Population',
                            data: data.infos,
                            dataLabels: {
                                enabled: true,
                                rotation: -90,
                                color: '#FFFFFF',
                                align: 'right',
                                format: '{point.y:.1f}', // one decimal
                                y: 10, // 10 pixels down from the top
                                style: {
                                    fontSize: '13px',
                                    fontFamily: 'Verdana, sans-serif'
                                }
                            }
                        }]
                    });
                    $("#"+vals).append("<div style='padding-left:280px'><p style='height: 10px;width:25px;border-bottom:2px solid red;float: left'></p>&nbsp;水平线</div>");

                }
            });
        });
        $("#print").click(function () {
            bdhtml=window.document.body.innerHTML;
            sprnstr="<!--startprint-->";
            eprnstr="<!--endprint-->";
            prnhtml=bdhtml.substr(bdhtml.indexOf(sprnstr)+17);
            prnhtml=prnhtml.substring(0,prnhtml.indexOf(eprnstr));
            window.document.body.innerHTML=prnhtml;
            window.print();
        });
        $(document).ready(function () {
            var sub = "<?php echo $_GET['subject']?>";
            var relsub = sub ? sub : 'total';
            var id = "<?php echo $_GET['id']?>";
            var ocode = "<?php echo $_GET['ocode']?>";
            if(relsub == 'total')
            {
                $.ajax({
                    url: "http://" + url + "/index.php/Comment/radar",
                    type: 'POST',
                    data: {id: id,ocode:ocode},
                    cache: false,
                    dataType: 'json',
                    success: function (data) {
                        $('#radar').highcharts({
                            chart: {
                                polar: true,
                                type: 'line'
                            },
                            title: {
                                text: '科目分析',

                            },
                            pane: {
                                size: '80%'
                            },
                            xAxis: {
                                categories: data.subname,
                                tickmarkPlacement: 'on',
                                lineWidth: 0
                            },
                            yAxis: {
                                gridLineInterpolation: 'polygon',
                                lineWidth: 0,
                                min: 0
                            },
                            tooltip: {
                                shared: true,
                                pointFormat: '<span style="color:{series.color}">{series.name}平均分: <b>{point.y:,.2f}分</b><br/>'
                            },

                            series: [{
                                name: '全区',
                                data: data.ocode,
                                pointPlacement: 'on'
                            }, {
                                name: '本校',
                                data: data.sch,
                                pointPlacement: 'on'
                            }]
                        });
                    }
                });
                $.ajax({
                    url: "http://"+url+ "/index.php/Comment/getmathInfos",
                    type: 'POST',
                    data:{id:id,ocode:ocode},
                    dataType: 'json',
                    success: function (data) {
                        $('#allinfos').highcharts({
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: title,

                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                categories: data.know,
                                crosshair: true
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: ''
                                }
                            },
                            tooltip: {
                                headerFormat: '<span style="font-size:10px">第{point.key}小题</span><table>',
                                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                '<td style="padding:0"><b>{point.y:.2f} 分</b></td></tr>',
                                footerFormat: '</table>',
                                shared: true,
                                useHTML: true
                            },
                            plotOptions: {
                                column: {
                                    pointPadding: 0.2,
                                    borderWidth: 0
                                }
                            },
                            series: data.info
                        });
                    }
                })

            }
            $('#total1').highcharts({
                chart: {
                    polar: true,
                    type: 'line'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: ['总分', '语', '数', '英',
                        '科', '社'],
                    tickmarkPlacement: 'on',
                    lineWidth: 0,
                    labels:{
                        style:{
                            fontSize:'8px'
                        }
                    }
                },
                yAxis: {
                    gridLineInterpolation: 'polygon',
                    lineWidth: 0,
                    min: 0
                },
                tooltip: {
                    shared: false
                },
                series: [{
                    data: [4.215, 3.855, 4.223, 4.3, 4.125, 4.005],
//                    data:[3.429,3.29,3.214,3.116,3.357],
                    name:'综合指数'
                }]
            });
            $('#total2').highcharts({
                chart: {
                    polar: true,
                    type: 'line'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: ['总分', '语', '数', '英',
                        '科', '社'],
                    tickmarkPlacement: 'on',
                    lineWidth: 0,
                    labels:{
                        style:{
                            fontSize:'8px'
                        }
                    }
                },
                yAxis: {
                    gridLineInterpolation: 'polygon',
                    lineWidth: 0,
                    min: 0
                },
                tooltip: {
                    shared: false
                },
                series: [{
                    data: [47.62, 28.19, 47.36, 53.8, 43.63, 37.45],
//                    data: [19.34, 24.14, 21.29, 16.64, 16.34, 25.19],
                    name:'A率'
                }]
            });
            $('#total3').highcharts({
                chart: {
                    polar: true,
                    type: 'line'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: ['总分', '语', '数', '英',
                        '科', '社'],
                    tickmarkPlacement: 'on',
                    lineWidth: 0,
                    labels:{
                        style:{
                            fontSize:'8px'
                        }
                    }
                },
                yAxis: {
                    gridLineInterpolation: 'polygon',
                    lineWidth: 0,
                    max:-4.8
                },
                tooltip: {
                    shared: false
                },
                series: [{
                    data: [-4.63, -7.59, -5.02, -4.37, -6.43, -8.24],
//                    data: [-42.63, -20.23, -25.04, -24.14, -24.59, -25.6],
                    name:'后30%'
                }]
            });
            $('#total4').highcharts({
                chart: {
                    polar: true,
                    type: 'line'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: ['总分', '语', '数', '英',
                        '科', '社'],
                    tickmarkPlacement: 'on',
                    lineWidth: 0,
                    labels:{
                        style:{
                            fontSize:'8px'
                        }
                    }
                },
                yAxis: {
                    gridLineInterpolation: 'polygon',
                    lineWidth: 0,
                    min: 0
                },
                tooltip: {
                    shared: false
                },
                series: [{
                    data: [671.6, 616.5, 696.4, 687.3, 669.8, 637.5],
//                    data: [535.2,558.7, 536.7, 534.6, 519, 540],
                    name:'标准分平均分'
                }]
            });
        });



    </script>
</block>



